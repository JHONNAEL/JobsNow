---
import { actions } from 'astro:actions';
import { Icon } from 'astro-icon/components';
import Title from '@/modules/shared/components/ui/Title.astro';

// Capturar el parámetro de la URL
const { id } = Astro.params;

// Recuperar datos del usuario desde la base de datos usando el ID
const { data: userData, error: userError } = await actions.findOneUser({ id });

if (userError || !userData) {
  // Si no se encuentra el usuario, redirigir a una página 404
  return Astro.redirect('/404');
}

// Desestructurar datos del usuario
const { user } = userData;
const { name, lastName, email, avatar } = user;
---

<!-- Página del Perfil -->
<main class="flex flex-col items-center p-8 bg-gray-50 min-h-screen">
  <!-- Encabezado del Perfil -->
  <section class="bg-white shadow-md rounded-lg p-6 w-full max-w-3xl">
    <div class="flex flex-col items-center">
      <!-- Imagen del Perfil -->
      <div class="w-32 h-32 rounded-full overflow-hidden border-4 border-green-500 mb-4">
        <img src={avatar || '/avatar.svg'} alt={`${name} ${lastName}`} />
      </div>
      <!-- Información Personal -->
      <h1 class="text-2xl font-semibold text-gray-800">
        {name} {lastName}
      </h1>
      <p class="text-gray-600 text-sm">{email}</p>
    </div>
  </section>

  <!-- Información adicional -->
  <section class="bg-white shadow-md rounded-lg p-6 w-full max-w-3xl mt-6">
    <Title>Información Adicional</Title>
    <p class="text-gray-700 text-sm">
      Aquí mostrar mas ojo.
    </p>
  </section>
</main>
